# Cyclomatic complexity

With this metric it is possible to indicate the complexity of a program. It measures the number of paths through the source code of a code section. In theory, how lower the cyclomatic complexity, how easier the code is to understand. However, the following method gets an complexity of 1:

```java
public int complexity1(bool a) {
  int asd = 234;
  asd =* 2342;
  .....
  int asv = asd * 24234 + (a > 234 ? 234 : 3) + 234 / asd;
  asd += asv - 234;
  return asd + 123;
}
```

And the following method gets an complexity of 3:

```java
public int complexity1(bool a) {
  switch(a) {
    case 1:
      return 123523;
    case 2:
      return 12353;
  }
  return 23423344;
}
```

while the last method is way more easier to understand.

## How do you count a statement that always branches to one branch

## How do you support polymerization

When you have a Class Audi that derives from Car and a class BMW that derives from Car. You accept an input parameter of type Car. How do you would the catch statements?

In Psuedo code:

```pseudo
Class Car
Class Audi:Car
Class BMW:Car

void someMethod(Car x)
{
  if (x.hasWheels())
    Throw auto;

  A = A + 1;
  Throw auto;  
}

catch BMW
{
  ...
}

catch AUDI
{
  ...
}
```

What is the complexity of someMethod? You do not know to what catch statement it will go.

## Test
As a test, we compared the result of the complexity function with Checkstyle. We genereated lists of the complexity per method and compared them:

### Checkstyle output

```text
/src/smallsql/database/Command.java:106:9: Cyclomatic Complexity is 3  
/src/smallsql/database/Command.java:116:5: Cyclomatic Complexity is 2  
/src/smallsql/database/Command.java:127:9: Cyclomatic Complexity is 2  
/src/smallsql/database/Command.java:134:5: Cyclomatic Complexity is 3  
/src/smallsql/database/Command.java:148:5: Cyclomatic Complexity is 2  
/src/smallsql/database/Command.java:86:5: Cyclomatic Complexity is 3  
/src/smallsql/database/Command.java:96:5: Cyclomatic Complexity is 2  
```

### Rascal output
```text
/src/smallsql/database/Command.java|(2404,307,\<83,4\>,\<91,5\>): Cyclomatic Complexity is 3"
/src/smallsql/database/Command.java|(2719,207,\<93,4\>,\<100,5\>): Cyclomatic Complexity is 2"
/src/smallsql/database/Command.java|(2931,360,\<102,1\>,\<110,2\>): Cyclomatic Complexity is 3"
/src/smallsql/database/Command.java|(3300,313,\<112,4\>,\<121,5\>): Cyclomatic Complexity is 2"
/src/smallsql/database/Command.java|(3618,337,\<123,1\>,\<132,2\>): Cyclomatic Complexity is 2"
/src/smallsql/database/Command.java|(3963,383,\<134,4\>,\<144,5\>): Cyclomatic Complexity is 3"
/src/smallsql/database/Command.java|(4439,170,\<148,4\>,\<152,5\>): Cyclomatic Complexity is 2"
```

We found out that the line numbers of Checkstyle are not comparable with the lines generated by Rascal what made it hard to compare. To still get a good comperason, we manually validated 10 files and checked if the same complexity levels are detected.  
